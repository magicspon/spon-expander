!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.sponResize=e()}(this,function(){"use strict";"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var t,e=(function(t,e){var n;t.exports=(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],i=n({},{easing:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},duration:1e3},t),r=i.easing,a=i.duration,o=i.start,s=i.end,l=0,c=null,u=null,d=null;return new Promise(function(t){d=window.requestAnimationFrame(function n(i){var f,p,h,v=l||o;u||(u=i),c=i-u,l=Math.round(r(c,o,s-o,a)),f=v,p=l,(o<=(h=s)?p<=h&&f<=p:p>=h&&f>=p)?(d=window.requestAnimationFrame(n),e&&e(l)):(t(v),window.cancelAnimationFrame(d),c=null,u=null,d=null,v=null)})})})}(t={exports:{}},t.exports),t.exports),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};return function t(i){var r,a=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaults={activeIndex:null,closeOthers:!1,open:!1,selector:"[data-accordion-btn]",name:"accordion",init:!0,buttonActiveClass:"is-active",contentActiveClass:"is-expanded",duration:300,easing:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}},this.createPanels=function(){var t=a.options,e=t.buttonActiveClass,n=t.contentActiveClass,i=t.activeIndex,r=t.open,o=t.name;a.panes=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(a.$el.querySelectorAll(a.options.selector))).map(function(t,s){t.setAttribute("data-accordion-index",s);var l=t.dataset.target,c=a.$el.querySelector(l),u=!!r||!r&&s===i;return t.setAttribute("aria-expanded",u),t.setAttribute("aria-selected",u),t.setAttribute("aria-controls",o+"-"+s),u&&(t.classList.add(e),c.classList.add(n)),c.setAttribute("data-enhanced",!0),c.setAttribute("aria-labelledby",o+"-"+s),c.setAttribute("aria-hidden",!u),c.setAttribute("role","tabpanel"),{$button:t,$target:c,index:s,open:u,isRunning:!1}})},this.onEnd=function(t){var e=t.$target,n=t.$button,i=t.open;return e.style.willChange="",e.style.height="",e.style.display="",t.isRunning=!1,n.setAttribute("aria-expanded",i),n.setAttribute("aria-selected",i),e.setAttribute("aria-hidden",!i),a},this.addEvents=function(){return a.panes.forEach(function(t){t.addEventListener("click",a.clickHandle),t.addEventListener("touchstart",a.clickHandle)}),a},this.removeEvents=function(){return a.panes.forEach(function(t){t.removeEventListener("click",a.clickHandle),t.removeEventListener("touchstart",a.clickHandle)}),a},this.clickHandle=function(t,e){t.preventDefault();var n=a.options.closeOthers,i=e.dataset.accordionIndex,r="true"===e.getAttribute("aria-expanded");if(n&&a.current){var o=a.current.index;o!==parseInt(i)&&a.collapse(o)}!0===r?a.collapse(i):a.expand(i),a.current=a.panes[i]},this.expand=function(t){var n=a.panes[t],i=a.options,r=i.duration,o=i.easing,s=i.buttonActiveClass,l=i.contentActiveClass;if(!n.isRunning){var c=n.$target,u=n.$button;c.style.display="block";var d=c.getBoundingClientRect().height;c.style.height=0,c.style.willChange="height",n.isRunning=!0,n.open=!0,a.emit("accordion:open",n),e({start:0,end:Math.round(d),duration:r,easing:o},function(t){return c.style.height=t+"px"}).then(function(){a.onEnd(n),u.classList.add(s),c.classList.add(l),a.emit("accordion:opened",n)})}return a},this.collapse=function(t){var n=a.options,i=n.duration,r=n.easing,o=n.buttonActiveClass,s=n.contentActiveClass,l=a.panes[t];if(!l.isRunning){l.open=!1;var c=l.$target,u=l.$button,d=c.getBoundingClientRect().height;c.style.height=d+"px",c.style.willChange="height",a.emit("accordion:collapse",l),l.isRunning=!0,e({start:Math.round(d),end:0,duration:i,easing:r},function(t){return c.style.height=t+"px"}).then(function(){a.onEnd(l),u.classList.remove(o),c.classList.remove(s),a.emit("accordion:collapsed",l)})}return a},this.initalize=function(){return a.addEvents(),a.$el.setAttribute("role","tablist"),a.$el.setAttribute("aria-multiselectable",a.options.closeOthers),a.createPanels(),a.emit("accordion:initalize"),a},this.destroy=function(){var t=a.options,e=t.buttonActiveClass,n=t.contentActiveClass;return a.removeEvents(),a.$el.removeAttribute("role"),a.$el.removeAttribute("aria-multiselectable"),a.panes.forEach(function(t){var i=t.$button,r=t.$target;i.classList.remove(e),i.removeAttribute("aria-expanded"),i.removeAttribute("aria-selected"),i.removeAttribute("aria-controls"),i.removeAttribute("role","tab"),r.removeAttribute("aria-hidden"),r.removeAttribute("aria-labelledby"),r.removeAttribute("role","tabpanel"),r.removeAttribute("data-enhanced",!0),r.classList.remove(n),r.removeAttribute("style")}),a.emit("accordion:destroy"),a},this.options=n({},this.defaults,o),this.$el=i,this.panes=[],this.current,this.options.init&&this.initalize(),Object.assign(this,(r=r||Object.create(null),{on:function(t,e){(r[t]||(r[t]=[])).push(e)},off:function(t,e){r[t]&&r[t].splice(r[t].indexOf(e)>>>0,1)},emit:function(t,e){(r[t]||[]).slice().map(function(t){t(e)}),(r["*"]||[]).slice().map(function(n){n(t,e)})}}))}});
